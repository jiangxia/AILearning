# Pattern | Claude都出4.5了，你还不懂扩展思考的推理革命

你让Claude帮你设计一个高并发系统架构，它秒回一个方案，看起来无懈可击。但你心里打鼓：一个资深架构师要画图、讨论、PK掉好几个方案才能搞定的事，它几秒钟就想明白了？这到底是真正的深度思考，还是一个“看起来很专业”的条件反射？

你没想错，这就是“快”的代价。为了解决这个问题，Anthropic推出了Extended Thinking（扩展思考）——让Claude像人类一样，花时间、有步骤地进行深度推理，并把完整的思考过程给你看。但代价也同样真实：平均156秒的等待，翻了3-5倍的API账单。这钱和时间，到底花得值不值？

本文将彻底讲透Extended Thinking的推理革命，帮你搞清楚这5个核心问题：

1.  Extended Thinking动不动就等2分多钟，到底什么时候该用，什么时候是浪费钱？
2.  官方说的thinking budget，我到底该设1024还是拉满到64000？
3.  为什么一开Extended Thinking，API成本就翻了好几倍？这笔账怎么算？
4.  Cursor里的think、think hard、ultrathink，到底有什么区别，我该怎么选？
5.  多等2分钟，准确率到底能高多少？真的值得吗？

---

## 一、扩展思考的本质：不是"想更多"，是"看得见的思考"

Extended Thinking不是简单地让模型多想几秒钟，而是给了它一个"内部思考空间"——最多可以用64,000个thinking tokens来推理，然后才给出最终答案。更关键的是，这个思考过程是可见的。

传统模型回答你的时候，就像一个黑盒子，你只能看到结果，根本不知道它是怎么得出结论的。Extended Thinking把这个黑盒打开了，你能清晰地看到Claude的推理路径：它先分析了什么、然后考虑了哪些备选方案、最终为什么选择这个而不是那个。在API返回的response里，会有独立的"thinking"块和"text"块，前者是思考过程，后者是最终答案。

这种透明性带来的不只是可解释性，更是质量的飞跃。在MATH 500数学测试中，Claude 3.7 Sonnet的Extended Thinking模式得分高达96.2%，而标准模式只有82.2%，Claude 3.5更是只有78.0%。在AIME 2024这种高难度数学竞赛题上，Extended Thinking拿到了80.0%的成绩，而Claude 3.5只有16.0%——这是从"勉强及格"到"接近满分"的质变。

为什么会有这么大的差距？因为复杂问题需要多步骤推理。比如你问Claude设计一个电商订单处理系统，标准模式可能直接给你一个"看起来合理"的方案。而Extended Thinking会先分析高并发场景下的瓶颈在哪，然后评估不同架构模式（微服务、事件驱动、CQRS）的优劣，接着考虑数据一致性和容错机制，最后才给出一个既考虑当前需求又为未来扩展预留空间的完整方案。这种系统性的深度思考，就是Extended Thinking的真正价值所在。

## 二、成本与速度的权衡：每一次深度思考都要付出代价

Extended Thinking不是免费午餐。根据2025年9月的实测数据，开启它之后，平均延迟约为156秒——也就是说，你问一个问题，要等将近2分半才能拿到答案。对于简单问题，这个等待时间纯属浪费。

更要命的是成本。因为thinking过程会生成大量tokens（通常是正常输出的3-5倍），你的API账单也会相应膨胀。以Claude Sonnet 4.5为例，其输出定价是每百万tokens $15。假设你用64,000 tokens做一次深度推理，光这部分thinking就要花掉约$0.96（64K × $15/1M）。如果你一天调用100次，光是thinking tokens就烧掉$96。

所以，关键是什么时候用。**架构设计与方案决策**是Extended Thinking的主场——技术选型、系统重构、数据库迁移策略，这些"一旦选错成本巨大"的决策，值得花2分钟等一个深思熟虑的方案，而不是拿个"看起来合理"的快速答案就上线。**复杂问题调试**也是典型场景，比如微服务系统里出现的间歇性数据不一致、分布式事务死锁、内存泄漏根因分析，这些需要多步骤排查、反复推理的问题，Extended Thinking能提供比标准模式深入得多的分析。**数据分析与算法优化**同样适合，像处理大规模时序数据的聚合算法、机器学习模型的特征工程，它能形成详细的分析报告而不只是概要建议。

反过来，简单代码生成（写个API接口、加个表单校验）、文档翻译、格式转换这些任务，用标准模式就够了。让Claude深度思考"怎么写一个Hello World"，绝对是浪费时间和金钱。

至于thinking budget设多少，官方建议从1,024起步，逐步增加到16,000。如果是特别复杂的任务（比如完整的系统架构设计），可以给到64,000。但记住，budget是上限而不是目标，Claude会根据问题复杂度自动调整实际用量，你设64K不代表它一定会用满。

## 三、Cursor集成与实战应用：从think到ultrathink

如果你用Cursor写代码，Extended Thinking的使用会更简单直观。Cursor把thinking budget巧妙地包装成了四个层级的命令，每个层级对应递增的思考预算。

它不是生硬的列表，而是一个递进的思考强度选择。**think**相当于低预算模式，适合"需要稍微想一下"的场景，比如优化一段代码逻辑、设计一个不复杂的函数。当你需要"认真考虑"时，可以用**think hard**，这给了模型中等预算，适合重构一个模块或设计一个小型功能的架构。再往上，**think harder**是高预算模式，专为"需要深度思考"的场景设计，比如规划整个服务的接口规范或数据库schema。最后，**ultrathink**则提供最高预算，用于那些"需要极致推理"的场景，如系统级架构设计、复杂算法实现或多服务协同方案。

一个实用的策略是：在探索阶段用标准模式快速迭代，只在遇到"硬骨头"时才启用Extended Thinking。比如你在开发一个订单系统，创建CRUD接口用标准模式就够了，但到了设计分布式事务处理、库存锁定这些核心逻辑时，就果断切换到think harder或ultrathink。

Extended Thinking还支持一个特别强大的功能：**交错思维（interleaved thinking）**。传统模式下，Claude要么先想完再调工具，要么调完工具直接给答案。但开启交错思维后（需在API中加上beta header `interleaved-thinking-2025-05-14`），Claude可以在每次工具调用之间进行思考，根据工具返回的结果动态调整下一步的推理方向。

举个例子，你让Claude分析一个线上事故。它会先调用日志查询工具，拿到初步数据后进行一轮thinking（"看起来是数据库连接池耗尽"），然后调用数据库监控工具，根据返回的数据再进行一轮thinking（"等等，连接池配置没问题，应该是慢查询导致的"），接着调用SQL分析工具，最终定位根因。这种"工具→思考→工具→思考"的循环，远比一次性思考或盲目调用工具要高效得多。

-----

## 快速解答

**Q1: Extended Thinking动不动就等2分多钟，到底什么时候该用，什么时候是浪费钱？**
A: 用在“一旦选错成本巨大”的决策上，如系统架构设计、复杂问题调试、核心算法优化。不要用在简单代码生成、格式转换或快速问答上。核心策略是：日常开发用标准模式，只在攻克关键难题时启用Extended Thinking。

**Q2: 官方说的thinking budget，我到底该设1024还是拉满到64000？**
A: 从1024起步，根据任务复杂度逐步增加到16000。只有在设计完整系统架构或进行多步骤算法推导等极端复杂场景下，才考虑使用64000。记住，budget是上限而非目标，模型会按需使用，设64K不代表每次都会用满。

**Q3: 为什么一开Extended Thinking，API成本就翻了好几倍？这笔账怎么算？**
A: 因为思考过程会产生大量tokens，通常是最终答案的3-5倍。按Sonnet 4.5每百万输出tokens $15计算，一次64K的深度思考成本约$0.96。如果每天调用100次，仅思考部分的开销就高达$96。因此，必须用在刀刃上。

**Q4: Cursor里的think、think hard、ultrathink，到底有什么区别，我该怎么选？**
A: 它们对应不同的思考预算。think用于优化代码片段等小任务；think hard用于重构模块；think harder用于设计接口规范等中型任务；ultrathink用于系统级架构设计等最复杂的任务。根据你面对问题的棘手程度，选择对应的思考强度即可。

**Q5: 多等2分钟，准确率到底能高多少？真的值得吗？**
A: 提升是质变。在MATH 500测试中，准确率从82.2%提升到96.2%；在AIME 2024竞赛中，从16.0%跃升至80.0%。对于简单任务，多等一秒都浪费；但对于需要深度推理的复杂决策，这种从“勉强及格”到“接近满分”的提升，完全值得等待。

---

## 深入交流

想要深入交流AI实践经验？添加微信，一起探讨AI时代的无限可能！

![微信二维码](assets/二维码.jpg)

> ### 关于本人 ｜ 黄彦湘
> 深耕互联网行业9年，专注前端开发技术方向，现为广州执业律师，同时兼备专利代理师资质。基于丰富的技术背景和法律实践经验，现为深度实践（Deepractice）社区核心贡献者，致力于推动AI深度实践在法律、小说创作等多元领域的创新应用与探索。
> **全网同名**：明易AI实践

---
