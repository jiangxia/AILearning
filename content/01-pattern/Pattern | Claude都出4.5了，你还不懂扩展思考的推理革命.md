# Pattern | Claude都出4.5了，你还不懂扩展思考的推理革命

你让Claude帮你设计一个高并发系统架构，它秒回一个方案，看起来挺专业。但你心里清楚，这种复杂问题，真让人类架构师来做，怎么也得思考个把小时。Claude真的想明白了吗？还是只是在"快速作答"？

Extended Thinking（扩展思考）就是为了解决这个问题诞生的。它让Claude可以像人类一样，花时间深度思考复杂问题，而且把整个思考过程展示给你看。不过代价也很明显——每次深度思考平均要等156秒，API成本可能翻3-5倍。

本文将深入解析Extended Thinking的推理机制，回答这5个核心问题：

1. Extended Thinking每次都要等2分钟，什么时候该用什么时候不该用？
2. thinking budget设多少合适？1024还是64000？
3. 为什么开启Extended Thinking后API成本翻了好几倍？
4. Cursor里的think、think hard、ultrathink到底怎么选？
5. Extended Thinking准确率提升多少？值得等那么久吗？

---

## 一、扩展思考的本质：不是"想更多"，是"看得见的思考"

Extended Thinking不是简单地让模型多想几秒钟，而是给了它一个"内部思考空间"——最多可以用64,000个thinking tokens来推理，然后才给出最终答案。更关键的是，这个思考过程是可见的。

传统模型回答你的时候，就像黑盒子，你只能看到结果，不知道它是怎么得出结论的。Extended Thinking把这个黑盒打开了，你能看到Claude的推理过程：它先分析了什么、然后考虑了哪些方案、为什么选择这个而不是那个。API返回的response里，会有独立的"thinking"块和"text"块，前者是思考过程，后者是最终答案。

这种透明性带来的不只是可解释性，更重要的是质量的飞跃。在MATH 500数学测试中，Claude 3.7 Sonnet的Extended Thinking模式得分高达96.2%，而标准模式只有82.2%，Claude 3.5更是只有78.0%。在AIME 2024这种高难度数学竞赛题上，Extended Thinking拿到了80.0%的成绩，而Claude 3.5只有16.0%——这是从"及格线"到"接近满分"的质变。

为什么会有这么大的差距？因为复杂问题需要多步骤推理。比如你问Claude设计一个电商订单处理系统，标准模式可能直接给你一个"看起来合理"的方案，而Extended Thinking会先分析高并发场景下的瓶颈在哪里，然后评估不同架构模式（微服务、事件驱动、CQRS）的优劣，接着考虑数据一致性和容错机制，最后给出一个既考虑当前需求又为未来扩展预留空间的方案。这种系统性的深度思考，就是Extended Thinking的价值所在。

## 二、成本与速度的权衡：每一次深度思考都要付出代价

Extended Thinking不是免费午餐。根据2025年9月的实测数据，开启Extended Thinking后，平均延迟约156秒——也就是说，你问一个问题，要等将近2分钟半才能拿到答案。对于简单问题，这个等待时间完全是浪费。

更让人肉疼的是成本。因为thinking过程会生成大量tokens（可能是正常输出的3-5倍），你的API账单也会相应膨胀。Claude Sonnet 4.5的定价是每百万输入tokens $3，每百万输出tokens $15。假设你用64,000 tokens做深度推理，光这部分thinking就要花掉约$0.96（64K × $15/1M）。如果你一天调用100次，光thinking tokens就烧掉$96。

所以关键是什么时候用。架构设计与方案决策是Extended Thinking的主场——技术选型、系统重构、数据库迁移策略这些"一旦选错成本巨大"的决策，值得花2分钟等一个深思熟虑的方案，而不是拿个"看起来合理"的快速答案就上线。复杂问题调试也是典型场景，微服务系统里出现的间歇性数据不一致、分布式事务死锁、内存泄漏根因分析，这些需要多步骤排查、反复推理的问题，Extended Thinking能提供比标准模式深入得多的分析和系统化的解决方案。数据分析与算法优化同样适合，处理大规模时序数据的聚合算法、机器学习模型的特征工程、SQL查询性能调优，Extended Thinking能形成详细的分析报告而不只是概要建议。

反过来，简单代码生成（写个API接口、加个表单校验）、文档翻译、格式转换、快速问答这些任务，用标准模式就够了。让Claude深度思考"怎么写一个Hello World"，纯属浪费时间和金钱。

至于thinking budget设多少，官方建议从1,024起步，逐步增加到16,000。如果是特别复杂的任务（比如完整的系统架构设计、多步骤的算法推导），可以给到64,000。但记住，budget不是越大越好——它是上限而不是目标，Claude会根据问题复杂度自动调整实际使用量，你设64K不代表它一定用满64K。

## 三、Cursor集成与实战应用：从think到ultrathink

如果你用Cursor写代码，Extended Thinking的使用更简单直观。Cursor把thinking budget包装成了四个层级的命令：think、think hard、think harder、ultrathink，每个层级对应递增的思考预算。

**think**：相当于低预算模式，适合"需要稍微想一下"的场景，比如优化一段代码逻辑、设计一个不复杂的函数。

**think hard**：中等预算，适合"需要认真考虑"的场景，比如重构一个模块、设计一个小型功能的架构。

**think harder**：高预算，适合"需要深度思考"的场景，比如设计整个服务的接口规范、规划数据库schema。

**ultrathink**：最高预算，适合"需要极致推理"的场景，比如系统级架构设计、复杂算法实现、多服务协同方案。

实际使用中，一个实用的策略是：探索阶段用标准模式快速迭代，只在"困难部分"启用Extended Thinking。比如你在开发一个订单系统，创建CRUD接口用标准模式就够了，但到了设计分布式事务处理、库存锁定机制这些核心逻辑时，就该切换到think harder或ultrathink。

Extended Thinking还支持**交错思维（interleaved thinking）**——这是个特别强大的功能。传统模式下，Claude要么先想完再调工具，要么调完工具直接给答案。但开启交错思维后（API里加上beta header `interleaved-thinking-2025-05-14`），Claude可以在每次工具调用之间进行思考，根据工具返回的结果动态调整推理方向。

举个例子，你让Claude分析一个线上事故。它会先调用日志查询工具，拿到初步数据后进行一轮thinking（"看起来是数据库连接池耗尽"），然后调用数据库监控工具，根据监控数据再进行一轮thinking（"等等，连接池配置没问题，应该是慢查询导致的"），接着调用SQL分析工具，最终定位到根因。这种"工具→思考→工具→思考"的循环，比一次性思考或盲目调用工具要高效得多。

## 快速解答

**Q1: Extended Thinking每次都要等2分钟，什么时候该用什么时候不该用？**
A: 适合架构设计、复杂调试、算法优化这些"一旦选错成本巨大"的决策，不适合简单代码生成、格式转换、快速问答。实用策略是探索阶段用标准模式，只在困难部分启用Extended Thinking。

**Q2: thinking budget设多少合适？1024还是64000？**
A: 官方建议从1024起步，逐步增加到16000。特别复杂任务可给64000，但budget是上限不是目标，Claude会根据问题复杂度自动调整实际使用量。设64K不代表一定用满64K。

**Q3: 为什么开启Extended Thinking后API成本翻了好几倍？**
A: thinking过程生成的tokens可能是正常输出的3-5倍。Sonnet 4.5输出定价$15/M tokens，64K thinking就花$0.96。一天调用100次Extended Thinking，光thinking部分就烧$96。关键是只在必要时使用。

**Q4: Cursor里的think、think hard、ultrathink到底怎么选？**
A: think适合优化代码逻辑，think hard适合重构模块，think harder适合设计接口规范，ultrathink适合系统级架构。递增的层级对应递增的thinking budget，越复杂的任务用越高的层级。

**Q5: Extended Thinking准确率提升多少？值得等那么久吗？**
A: MATH 500测试：Extended Thinking 96.2% vs 标准模式82.2%。AIME 2024：80.0% vs 16.0%。对于复杂任务，从及格线到接近满分的质变。简单任务不值得等，复杂决策完全值得。

---

## 深入交流

想要深入交流AI实践经验？添加微信，一起探讨AI时代的无限可能！

![微信二维码](assets/二维码.jpg)

> ### 关于本人 ｜ 黄彦湘
> 深耕互联网行业9年，专注前端开发技术方向，现为广州执业律师，同时兼备专利代理师资质。基于丰富的技术背景和法律实践经验，现为深度实践（Deepractice）社区核心贡献者，致力于推动AI深度实践在法律、小说创作等多元领域的创新应用与探索。
> **全网同名**：明易AI实践

---
